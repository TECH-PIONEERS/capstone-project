# 0513

상위 회의: 5월 (5%E1%84%8B%E1%85%AF%E1%86%AF%20165e6d39028a4ac49db3079ac9ca14c8.md)

**피드백**

1. 현재 진행된 부분은 공이 지나가는 루트와 비프음이 전부인 듯 보이는데, 주제 계획서에 있던 IR LED를 통해 파악하는 부분이 빠르게 완성되어야 할 듯 보입니다.
2. 1달밖에 남지 않았지만, 실 사용 후 개선점까지 파악하기에는 시간이 부족해 보입니다. 시간 분배 잘 하시길 바랍니다.
3. 공이 좌우벽에 부딪혔을 때의 예외케이스 알고리즘 처리 필요하다고 생각합니다(없다면 좌우벽에 부딪히고 튕겨나와서 홀에 들어가도 들어가는 것으로 되는 등 여러 문제 발생)
4. 딱히 기술이나 기능이 많지 않아보여 피드백할 내용이 없을 것으로 보이며빠르게 완성 후 예외케이스 들을 찾아서 고치는데 많이 시간을 사용해야될 것으로 보입니다
- 시각 장애인용 퍼팅 연습기 특징이 보이지 않음
- 사용자 심화 인터뷰를 진행해 볼 것을 권유함

---

- 시각 장애인 전용임을 강조하기 위해 TTS 시나리오 부분을 더 추가해야할듯. 사용자가 리모컨 누르면 작동 시작하는 방식으로 해서 시작부터 TTS로 자세하게 설명하고 순서를 돕는 등의 기능이 필요해 보임

**[예지]**

---

1. **opencv/ir_alignment.py**
- IR Camera1, 2를 서로 평행한 위치에 배치하여 퍼터의 가운데에 부착된 LED로 정렬 판단 (가운데 LED가 보이지 않으면 정렬 됨, LED가 보이면 정렬되지 않음)
- 추가적 기능 필요: 정렬되지 않았을 경우 어떻게 정렬 유도할 것인지
- 기본 mapping.py 코드에서 밑의 부분 추가
    
    ```python
    def check_alignment(data):
        # 데이터의 3번째 값부터 확인하여 1023이 아닌 값이 있는지 확인
        for value in data[2:]:
            if value != 1023:
                return True
        return False    
    ```
    
    ```python
        if myString or myString1:
            if is_valid_string(myString) and is_valid_string(myString1):
                print(myString)
                print(myString1)
                
                output = list(map(float, myString.split(',')))
                output1 = list(map(float, myString1.split(',')))
                output = list(map(int, output))
                output1 = list(map(int, output1))
            # 밑의 2줄 추가
            if check_alignment(output) or check_alignment(output1):
                print("정렬 되지 않았습니다.")
    ```
    
- 문제점
    - LED 3개 있어야 하는데 2개라서 테스트 어려움
    - LED의 직진성이 강해 원하는 기능을 하지 못할 것으로 예상
1. **IR 속도 개선 관련 논의**
- Setup 주석 처리 해제 코드 실행하였으나 속도 관련 문제 해결 되지 않음
- 보드레이트 변경 논의
    - IR Camera의 baud rate **115200**으로 변경
- OpenCV로 IR Camera 데이터만 출력 하였을 때는 빠르지만 카메라와 함께 데이터 출력하면 느려짐

 **[지수]**

---

1) 멀티프로세싱 코드 작성

- p1 : opencv draw
- p2 : ir data 받아오기
    - conn을 통해서 p2의 output 값을 p1이 사용함
    
    ```python
    conn.recv() <-- [ouput, output1]
    ```
    

[https://github.com/TECH-PIONEERS/capstone-project/blob/main/opencv/mapping-jisu.py](https://github.com/TECH-PIONEERS/capstone-project/blob/main/opencv/mapping-jisu.py)

**Result**

동시에 돌긴하지만 ir sensor 적용이 여전히 느림 → 이는 카메라 프레임 받아오면서 늦어지는걸로 확인이 되었음.

- 웹캠, picamera 모두 동일하게 느려짐
- 그러나 실제 데이터 값을 빠르게 받아오고 opencv frame 위에 그리는게 느릴 수 있음 이를 확인해야함
- [ ]  센서값은 빠르게 들어오는데 opencv 위에 그리는 게 느린건지 확인해야함티

**TODO**

- [x]  PID 확인
- [x]  get_serial 함수 while문 안에 sleep.time 추가한 후 결과 확인하기

2) utils.py

옮길 수 있는 함수들 params 수정 후 utils.py로 옮김

다른 코드 사용할 때 참고

---