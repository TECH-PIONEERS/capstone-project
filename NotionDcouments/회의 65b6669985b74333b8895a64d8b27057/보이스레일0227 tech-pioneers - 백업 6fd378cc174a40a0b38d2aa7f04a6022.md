# 보이스레일0227/tech-pioneers - 백업

상위 회의: 보이스레일/tech-pioneers (%E1%84%87%E1%85%A9%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3%E1%84%85%E1%85%A6%E1%84%8B%E1%85%B5%E1%86%AF%20tech-pioneers%200214b033715d4958b7b17b0b3d2505a6.md)

# 보이스레일: 시각장애인을 위한 비콘 기반 솔루션

[뉴스](https://www.ablenews.co.kr/news/articleView.html?idxno=98412), [논문](https://www.dbpia.co.kr/journal/articleDetail?nodeId=NODE11186812) 외 다양한 [미디어](http://kodaf.or.kr/bbs/board.php?bo_table=B12&wr_id=158)를 통해 접한 지하철 청음 문제는 시각적으로 역 정보를 파악하기 어려운 상황에서 지하철 안내방송의 소리가 작아 발생하는 불편함입니다. 이는 비장애인도 겪고 있는 문제로, 교통약자에게는 그 영향이 더 큽니다. 

시각 장애를 가진 지인을 통해 지하철 청음 문제가 아직까지 해결되지 않았으며 한국장애인단체총연맹에서 이를 해결하기 위해 꾸준하게 노력하고 있음을 확인하였습니다. 그리고 청음 문제 외 시각장애인이 지하철 이용 시 겪는 불편한 점을 알게 되었습니다. 

저희는 스마트 음량 조절 시스템과 교통 약자 전용 앱을 개발하여 교통약자들이 겪는 문제를 해결하고자 합니다. 제물포역 역장님 인터뷰 그리고 시각장애인 인터뷰에서 해당 아이디어가 취지가 좋다, 만들면 사용하고 싶다 등 긍정적인 의사를 받아, 교통약자도 편하게 이용할 수 있는 지하철 환경을 만들기로 결심하였습니다. 

[2022년 경기연구원 공식블로그의 설문조사](https://m.blog.naver.com/gri_blog/222837492838)에 따르면, 지하철은 교통약자가 가장 선호하는 대중교통으로, 교통약자의 이동 수단으로서 매우 중요합니다.

그러나 지하철 안내방송의 청음 문제는 여전히 고쳐지지 않고 있으며 이는 교통약자에게 큰 고난입니다.

“보이스레일”은 주변 소음을 감지하여 스피커의 출력 데시벨을 자동으로 조절함과 동시에 교통약자 특화 서비스를 지원하는 전용 앱을 통해 사용자에게 안전하고 편리한 이동 경험까지 제공하는 솔루션입니다.

### **시각장애인 인터뷰**

시각장애인과의 두 번의 인터뷰를 통해 프로젝트의 가치를 검증하였습니다. 

Q1 : 지하철 안내방송이 안 들리는 문제가 실제로도 문제로 작용하는지?

A1 : 문제이고 지금도 계속 관련해서 민원을 내는 실정이다. 청각에 의존할 수 밖에 없는 상황에서 안내방송을 한 번 놓치면 도착역을 놓칠 수도 있다는 게 문제다.

Q2 : 시각장애인을 위해 현재 이용하고 있는 열차에 따른 다음 역을 알려주는 기능을 제공하는 앱을 구상 중인데 이 아이디어가 실용적인가?

A2 : 앱으로 제공되면 좋을 것 같다. 
추가로 어디 칸에 타고 있는지에 대한 정보도 제공해 줬으면 좋겠다. 역에 마중 나오는 서비스를 이용하려고 할 때, 스크린 도어에 있는 현재 칸에 대한 점자 정보를 미리 확인하지 못하고 급하게 탄 경우 마중 나오는 서비스를 이용하기 어렵게 된다. 

이러한 정보를 스마트폰으로 확인할 수 있다면 정말 좋을 것 같다.

Q3 : 지하철 주요 시설 길 찾기 서비스도 구상하고 하는데 이 아이디어가 실제로 시각장애인에게 도움이 되는지?

A3 : 도움이 된다. 아무래도 역의 시설물 위치를 모르다보니 점자블록에만 의존해서 길을 걸어가는 게 한계가 있다. 스마트폰으로 제공되면 편리하게 사용할 것 같다. 

Q4 : 시각장애인이 주로 사용하는 지하철 관련 스마트폰 앱이 있는지?

A4 : 또타지하철이라는 서울교통공사에서 제공하는 애플리케이션과 카카오 지하철을 많이 이용한다. 그렇지만 또타지하철은 현재 위치를 제공하고 있지 않고 카카오 지하철은 내가 현재 위치를 조작해야 한다.

Q5 : 보이스레일 서비스가 제공된다면 사용할 의향이 있는지?

A5 : 앞에서 말했듯이 계속해서 문제제기를 하고 있는 사안이라 보이스레일 서비스가 제공되면 유용하게 사용할 것이다. 

Q6 : 보이스레일을 금전적인 가치로 매긴다면?

A6 : 교통공사측을 상대로 제공하는 서비스이니 몇 억의 가치가 있을 것이다.

인터뷰를 통해 지하철 안내방송 음성 문제와 현재 역 정보가 시각장애인도 문제로 인식하고 있는 부분이라는 것을 알 수 있었습니다. 

### 지하철 소음 환경 답사

현재 존재하는 한국어 음성 인식 기술 중 성능이 가장 뛰어나다고 알려진 **클로바노트**를 활용하여 지하철 소음 환경을 조사하였습니다. 

| 역 | 소음 평균(dB) | 소음 최대(dB) | 측정 시간/요일 | 혼잡도 |
| --- | --- | --- | --- | --- |
| 인천 1호선 | 64.2 | 73.2 | 9:26 / 수 | 여유 |
| 7호선 | 66.6 | 81.6 | 9:50 / 수 | 보통 |

비교적 소음이 적은 인천 1호선에서는 안내방송의 음성이 잘 들려, 클로바노트에서도 열차의 정차 여부에 상관없이 대부분의 안내방송이 인식되었습니다.
그러나 주변 소음이 많은 7호선에서는 열차가 정지하였을 때 나오는 안내방송만 인식되었습니다. 소음으로 인해 열차가 달릴 때 천왕역에 대한 안내방송은 클로바노트에서 인식하지 못했습니다.

![열차 정차 여부에 관계없이 안내방송이 기록됨](%E1%84%87%E1%85%A9%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3%E1%84%85%E1%85%A6%E1%84%8B%E1%85%B5%E1%86%AF%20tech-pioneers%200214b033715d4958b7b17b0b3d2505a6/Screenshot_20240208-092525.jpg)

열차 정차 여부에 관계없이 안내방송이 기록됨

![열차 정차 시 안내방송만 기록됨](%E1%84%87%E1%85%A9%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3%E1%84%85%E1%85%A6%E1%84%8B%E1%85%B5%E1%86%AF%20tech-pioneers%200214b033715d4958b7b17b0b3d2505a6/Screenshot_20240208-092516.jpg)

열차 정차 시 안내방송만 기록됨

[철도경저의 [진단] 극심한 소음에도 기존 궤도시스템 고수하는 서울교통공사](https://www.redaily.co.kr/news/articleView.html?idxno=2066) 에 따르면 5호선 송정-마곡 구간의 평균 소음이 88.8dB로 측정되었다고 한다. 이는 

# 보이스레일: 시각장애인을 위한 비콘 기반 솔루션

`보이스레일` 은 시각장애인에게 안내방송 음량 자동 조절 스피커와 모바일 어플리케이션을 통한 플랫폼 위치, 칸 위치 제공의 차별화된 서비스를 제공합니다. 라즈베리파이4(8GB) 를 통해 스피커 음량 자동 조절과 iBeacon 제어를 수행합니다. 모바일 어플리케이션을 활용해 시각장애인 친화적인 기능을 제공하여 편리한 교통수단 활용에 기여합니다.

### 필요성

- 기존 교통약자를 위한 서비스는 시각장애인에게 접근성이 낮으며 위치 관련 기능이 제대로 작동하지 않습니다.
- 안내 방송 출력 및 음량 가변 조절 장치를 통해 지하철 안내방송 소리가 작아 불편함을 느끼는 사람들에게 도움을 줍니다.

### 목표

- 지하철 안내방송 음량 조절 시스템 등 시각장애인을 위한 지하철 서비스를 안정적으로 구현 및 제공하는 것이 핵심 목표입니다.

## 경쟁사 분석

### 또타지하철 - Seoul Subway

보이스레일과 유사한 서비스로는 서울교통공사가 운영하는 **또타지하철**이 있습니다. 
이는 지하철 소식, 지하철 주요 시설, 노선도, 교통약자 관련 서비스 제공 그리고 민원 신고 등이 가능한 애플리케이션입니다. 

**교통약자와 관련된 서비스** 

전동휠체어 안전승하차 및 급속충전기, 영상전화기(수화), 휠체어리프트 서비스, 이동경로 정보를 제공합니다. 

**또타지하철의 문제점**

1. 위치 관련 서비스가 동작하지 않음
    
    또타지하철을 교통약자 모드로 직접 사용해본 결과 현재 위치를 받아오지 못하며 이동경로 서비스가 제대로 작동하지 않았습니다. 
    
    다음은 2024년 2월 26일에 확인한 또타 지하철 애플리케이션 교통약자 모드 기능 테스트 결과입니다. 
    
    - 수인분당선: 지식정보단지 역에서 원인재 역으로 이동하는 지하철 칸 내에서 현재 위치를 받아오는 기능을 테스트 했습니다. 블루투스, GPS, 마이크 등 또타지하철에서 요구하는 권한을 모두 활성화하고 테스트를 진행했지만 현재 위치를 받지 못했습니다.
    - 원인재 역: 지하철 칸에서 내려 환승 지하철 칸으로 갈아타는 과정에서 현재 위치를 받아오는 기능을 테스트 했습니다. 테스트 결과, 현재 위치를 받아오지 못했습니다.
    - 인천 1호선: 원인재 역에서 인천역으로 이동하는 지하철 칸 내에서 현재 위치를 받아오는 기능을 테스트했습니다. 테스트 결과, 현재 위치를 받아오지 못했습니다.
    
    다음은 기능 테스트 과정을 촬영한 영상 링크입니다.
    
    - 수인분당선: [https://youtu.be/na0t4r-kxJ4](https://youtu.be/na0t4r-kxJ4)
    - 원인재 역: [https://youtu.be/Cvj_UbxJ9Cs](https://youtu.be/Cvj_UbxJ9Cs)
    - 인천 1호선: [https://youtu.be/nbJ0MvcZueY](https://youtu.be/nbJ0MvcZueY)
    
    현재 위치를 받아오지 못하여 편의시설 버튼이 비활성화된 모습을 확인 할 수 있었습니다. 이에 또타지하철은 위치 관련 서비스가 동작하지 않음을 확인하였습니다.
    
    ![Untitled](%E1%84%87%E1%85%A9%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3%E1%84%85%E1%85%A6%E1%84%8B%E1%85%B5%E1%86%AF%20tech-pioneers%200214b033715d4958b7b17b0b3d2505a6/Untitled.png)
    
    ![또타지하철 평점 및 리뷰](%E1%84%87%E1%85%A9%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3%E1%84%85%E1%85%A6%E1%84%8B%E1%85%B5%E1%86%AF%20tech-pioneers%200214b033715d4958b7b17b0b3d2505a6/Untitled%201.png)
    
    또타지하철 평점 및 리뷰
    

![Untitled](%E1%84%87%E1%85%A9%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3%E1%84%85%E1%85%A6%E1%84%8B%E1%85%B5%E1%86%AF%20tech-pioneers%200214b033715d4958b7b17b0b3d2505a6/Untitled%202.png)

![Untitled](%E1%84%87%E1%85%A9%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3%E1%84%85%E1%85%A6%E1%84%8B%E1%85%B5%E1%86%AF%20tech-pioneers%200214b033715d4958b7b17b0b3d2505a6/Untitled%203.png)

![Untitled](%E1%84%87%E1%85%A9%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3%E1%84%85%E1%85%A6%E1%84%8B%E1%85%B5%E1%86%AF%20tech-pioneers%200214b033715d4958b7b17b0b3d2505a6/Untitled%204.png)

![Untitled](%E1%84%87%E1%85%A9%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3%E1%84%85%E1%85%A6%E1%84%8B%E1%85%B5%E1%86%AF%20tech-pioneers%200214b033715d4958b7b17b0b3d2505a6/Untitled%205.png)

대부분의 사용자가 위치 검색이 제대로 되지 않거나 UX가 어려운 부분에 불만을 가지고 있음을 확인할 수 있습니다.

1. 불편한 UX
    
    교통약자 모드가 마련이 되어있지만 접근성이 좋지 않습니다.
    

> “**서울교통공사 ‘또타지하철’ 앱… 장애인 접근성 100점 만점에 30점**” 기사 중 일부
> 
> 
> 특히 시각장애청년들은 “앱 자체에 메뉴가 너무 많아 스크린리더로 읽었을 때 전체 역사정보가 모두 읽혀 접근 자체가 불가, 시각장애인이 혼자서는 사용이 불가하다”고 평가했다.
> 
>  “메뉴의 세분화가 심할 뿐만 아니라 메뉴에 접속했다고 하더라도, 세부 메뉴를 선택할 때 스크린리더로 읽히는 곳과 직접적으로 탭을 해야 하는 부분이 달라 혼란스럽다”
> 

[서울교통공사 ‘또타지하철’ 앱... 장애인 접근성 100점 만점에 30점 | 더인디고](https://theindigo.co.kr/archives/21975)

![Untitled](%E1%84%87%E1%85%A9%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3%E1%84%85%E1%85%A6%E1%84%8B%E1%85%B5%E1%86%AF0227%20tech-pioneers%20-%20%E1%84%87%E1%85%A2%E1%86%A8%E1%84%8B%E1%85%A5%E1%86%B8%206fd378cc174a40a0b38d2aa7f04a6022/Untitled.png)

**표) 휠체어 리프트 서비스 내선 전화 조회**

일부 서비스에만 교통약자 음성검색 기능이 제공됩니다.

[음성 검색 기능 제공 O]

- 경로 검색 서비스
- 승강기 고장 알림

[음성 검색 기능 제공 X]

- 전동휠체어 급속충전기
- 수어영상 전화기
- 휠체어 리프트 서비스

휠체어 리프트 서비스를 이용한다고 할 때, 시각장애인은 Talkback(Android)이나 VoiceOver(iOS)과 같은 모바일 스크린리더를 이용하여 애플리케이션을 이용하고 이것의 도움을 받아 원하는 역의 내선 전화를 찾아야 합니다. 

해당 서비스는 따로 검색 기능을 제공하지 않았으며 대부분 호선이 10개 이상의 역을 포함하고 있어 원하는 역을 찾기까지 시간이 오래 걸리는 것을 확인했습니다.

| 1호선 | 2호선 | 3호선 | 4호선 |
| --- | --- | --- | --- |
| 26개 | 12개 | 6개 | 9개 |

| 5호선 | 6호선 | 7호선 | 8호선 |
| --- | --- | --- | --- |
| 13개 | 17개 | 15개 | 6개 |

> **모바일 스크린리더 

Talkback** : 시각 장애인 사용자가 장치와 상호 작용할 수 있도록 도와주는 Android 운영 체제용 접근성 서비스
**VoiceOver** : 화면을 볼 수 없는 경우에도 iPhone을 사용할 수 있도록 도와주는 제스처 기반 화면 읽기 도구
> 

![휠체어 리프트 서비스 UI](%E1%84%87%E1%85%A9%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3%E1%84%85%E1%85%A6%E1%84%8B%E1%85%B5%E1%86%AF0227%20tech-pioneers%20-%20%E1%84%87%E1%85%A2%E1%86%A8%E1%84%8B%E1%85%A5%E1%86%B8%206fd378cc174a40a0b38d2aa7f04a6022/Untitled%201.png)

휠체어 리프트 서비스 UI

![수어영상전화기 UI](%E1%84%87%E1%85%A9%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3%E1%84%85%E1%85%A6%E1%84%8B%E1%85%B5%E1%86%AF0227%20tech-pioneers%20-%20%E1%84%87%E1%85%A2%E1%86%A8%E1%84%8B%E1%85%A5%E1%86%B8%206fd378cc174a40a0b38d2aa7f04a6022/Untitled%202.png)

수어영상전화기 UI

## 차별성

**또타지하철과의 차별성**

1. **시각장애인에게 친화적인 UX**
    
    모든 서비스에 음성 검색 기능을 넣어 원하는 정보에 쉽게 접근할 수 있습니다. 
    즐겨찾기가 가능하며 내선 번호 조회 시 위치 정보를 조회하여 현재 위치한 역을 내선 번호를 우선으로 보여줍니다. 
    
    (UI/UX 카테고리 이미지 참고)
    
2. **안내 방송 음량 가변 조절 장치**
    
    주변 소음에 따라 객차 안내방송 음량을 조절하는 장치를 포함합니다.
    
    먼저, 또타지하철 서비스는 기본적으로 지하철 객차 안내 방송을 제공하지 않습니다. 교통 약자 모드를 설정하면 앱 화면에 나와있는 정보만을 음성으로 출력하고 있습니다. 이에 보이스레일은 스피커를 통해 객차 안내 방송 음량을 출력하는 기능을 탑재하고 있습니다. 또한 보이스레일 애플리케이션을 통해 주변 소음에 따라 음량을 적절하게 조절할 수 있어 편의성을 높일 수 있다는 장점 및 차별성을 가지고 있습니다.
    

**지하철 관련 애플리케이션과의 차별성**

1. **시각장애인 전용 지하철 음성 출력 기능 탑재** 
    
    카카오 지하철, 카카오맵, 네이버 지도 등 교통 관련 애플리케이션을 확인한 결과, 교통 약자 모드를 따로 지원하고 있지 않습니다. 시각장애인과 같은 교통 약자를 위해 승강장 간격·높이 정보 등 지하철 역사 내 교통 약자 시설 정보만 제공하고 있습니다. 이에 시각장애인 전용 지하철 음성 출력 기능을 탑재한 보이스레일이 시각장애인을 위한 전용 애플리케이션이라는 점에서 차별성을 지니고 있음을 확인하였습니다. 
    

## 서비스 구조

![역사 내 위치 안내](%E1%84%87%E1%85%A9%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3%E1%84%85%E1%85%A6%E1%84%8B%E1%85%B5%E1%86%AF0227%20tech-pioneers%20-%20%E1%84%87%E1%85%A2%E1%86%A8%E1%84%8B%E1%85%A5%E1%86%B8%206fd378cc174a40a0b38d2aa7f04a6022/Untitled%203.png)

역사 내 위치 안내

![안내 방송 볼륨 조절 서비스](%E1%84%87%E1%85%A9%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3%E1%84%85%E1%85%A6%E1%84%8B%E1%85%B5%E1%86%AF%20tech-pioneers%200214b033715d4958b7b17b0b3d2505a6/Untitled%206.png)

안내 방송 볼륨 조절 서비스

## 주요 기능

**지하철 내부 소음에 따른 안내방송 소리 조절**

- 지하철 혼잡도는 시간대, 호선별, 역별로 달라집니다. 소음을 유발하는 인자들은 다양합니다. 따라서 마이크를 이용하여 현재 소음 데시벨을 측정하고, 라즈베리파이를 이용하여 평균 신호 크기를 계산하여 객차 내 소음 정도를 수치화합니다. 이 소음 정도에 따라 안내방송 음량을 적절하게 조절하는 기능을 수행합니다.
- 안내방송 소리가 너무 커서 민원이 발생하기도 하므로, 소음이 줄어들 때는 안내방송 소리를 줄입니다.

**비콘(Beacon)**

![Untitled](%E1%84%87%E1%85%A9%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3%E1%84%85%E1%85%A6%E1%84%8B%E1%85%B5%E1%86%AF%20tech-pioneers%200214b033715d4958b7b17b0b3d2505a6/Untitled%207.png)

무선 통신을 이용하여 특정 위치에 있는 스마트 디바이스에 정보를 전달합니다. 
주로 Bluetooth Low Energy(BLE) 기술을 활용하며, 작은 크기와 저전력 소비가 특징입니다.
GPS 신호가 도달하지 않는 실내 환경에서 위치 정보를 제공하는 데 사용됩니다.

근거리 무선 통신인 NFC는 10cm 이내 근거리에서만 작동하는 반면, 비콘은 최대 50m 거리에서 작동할 수 있으며 약 500배 차이가 납니다.

**비콘 위치 추적 기능**

 비콘은 21바이트 정도의 패킷을 주기적으로 방출하게 됩니다. 이 패킷에는 RSSI를 포함하고 있는데 이는 수신된 무선 신호데 존재하는 전력 측정 값입니다. 이는 음수인 ㏈m으로 표기되며, 0에 가까울수록 크게 됩니다. (로그 스케일이므로 음수임에도 불구하고 실제 값은 양의 값을 가지게 됩니다.) BLE 광고 패킷을 송신하는 비콘가 수신가 간 거리가 가까우면 RSSI값은 커지고 멀어지면 RSSI는 작아집니다. 따라서 이는 비콘과 수신기 사이의 거리를 나타내는 지표로 사용할 수 있는 것 입니다. 이를 공식으로 나타내면 다음과 같습니다.

$$
RSSI=-10nlog_{10}(d) + a
$$

n은 경로 손실 지수입니다. 이는 주변 환경에 따라서 2~4의 값을 가지게 됩니다. d는 거리, a는 Tx Power입니다.
이렇게 비콘과 수신기 사이의 거리를 알아냈다면, 삼변측량 기법을 사용할 수 있습니다. 이는 세 점으로부터 직선거리를 사용하여 사용자의 좌표를 구하는 기법입니다. 비콘으로부터 특정 거리에 있는 점에 대해 세 원이 교차하는 지점은 하나만 존재하게 됩니다. 따라서 수신기의 위치를 특정할 수 있게 되는 것 입니다.

비슷한 방법으로 4개 이상의 원을 사용한 방법도 존재합니다. 이렇게 되면 더욱 정확한 측위가 가능하지만 기본적으로 필요한 비콘의 개수가 늘어난다는 단점이 발생하게 됩니다.

**BLE 비콘 오차 감소에 관련된 내용**

 BLE 비콘을 이용한 측위 시스템의 고질적인 문제를 해결하기 위한 방법으로 “정준희, BLE 비콘 시스템에서 측위 정밀도 향상을 위한 위치 오차 보정 알고리즘, 한국위성정보통신학회논문지 제11권 4호” 에서 제안한 방법을 이용하고자 합니다.

 첫 번째로 Bounced cancellation을 사용합니다. 이는 한 번에 이동 가능한 거리를 제한합니다. 따라서 좌표가 튀어서 발생하는 오차를 최소화할 수 있습니다. 이는 사용자의 위치 좌표(x1, y1)과 (x2, y2)라고 하고 시간은 각각 t1, t2라 했을때, 두 점 사이의 거리는 d가 됩니다. 이때, 이 거리 d가 최소 거리보다 작다면 사용자가 움직이지 않거나 잘못된 위치 좌표가 수신된 경우입니다. 따라서 해당 좌표는 무시하게 됩니다. 그래고 사용자의 다음 수신 좌표가 지속적으로 이동 중으로 찍히면 좌표 (x2, y2)를 최소거리 지점인 좌표 (xm, ym)으로 보정하는 방법입니다. 이때, d가 최소 거리와 좌표 이탈 한계 거리 사이에 존재한다면 수신 좌표의 신뢰값을 바탕으로 위치를 보정하게 됩니다. 이는 비콘과 사용자사이의 거리를 값으로 설정되고, 그 값이 작으면 정확도가 떨어진다고 가정합니다. 만약 수신 좌표의 신뢰값이 크다면 수신 좌표 값을 그대로 유지하게 됩니다.

 두 번째로 방향벡터를 이용한 측위오차 보정 기법을 이용합니다. 이는 BLE 비콘으로부터 받은 위치 좌표를 이용하여 방향벡터를 계산한 후, 계산된 방향벡터를 통해 사용자의 이동 방향을 예측하고 위치 오차를 보정하는 것입니다. 방향벡터를 구하기 위해 사용되는 수신좌표는 사용자의 이동 속도에 따라 다르게 설정되며, 이동 속도가 빠르면 계산된 벡터들이 나타내는 방향이 명확하기 때문에 적은 비콘으로 구현 가능 합니다. 개략적인 과정을 나타내면 다음과 같습니다.

1. 방향벡터의 원점이 되는 좌표를 선정한다.
2. 원점 좌표로부터 각 좌표까지의 벡터값을 계산한다.
3. 계산된 벡터 값들의 합을 통해 사용자가 갖는 방향벡터를 계산한다.
4. 방향벡터를 기준으로 수신된 위치 좌표를 보정한다.

**제물포역 비콘 배치 계획**

빨간 전파 표기 위치에 비콘을 배치할 계획입니다.

![제물포역 곳곳에 비콘 설치](%E1%84%87%E1%85%A9%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3%E1%84%85%E1%85%A6%E1%84%8B%E1%85%B5%E1%86%AF%20tech-pioneers%200214b033715d4958b7b17b0b3d2505a6/Untitled%208.png)

제물포역 곳곳에 비콘 설치

**프로세스**

![프로세스](%E1%84%87%E1%85%A9%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3%E1%84%85%E1%85%A6%E1%84%8B%E1%85%B5%E1%86%AF0227%20tech-pioneers%20-%20%E1%84%87%E1%85%A2%E1%86%A8%E1%84%8B%E1%85%A5%E1%86%B8%206fd378cc174a40a0b38d2aa7f04a6022/Untitled%204.png)

프로세스

**역 정보 데이터베이스 테이블**

![Untitled](%E1%84%87%E1%85%A9%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3%E1%84%85%E1%85%A6%E1%84%8B%E1%85%B5%E1%86%AF%20tech-pioneers%200214b033715d4958b7b17b0b3d2505a6/Untitled%209.png)

자체적으로 수집한 정보를 바탕으로 데이터베이스를 구축합니다. 

역 정보 테이블은 아래처럼 데이터가 저장됩니다.

| id | uuid | line_number | distance | main_facilities | place_name |
| --- | --- | --- | --- | --- | --- |
| 1 | 123sf34 | 1 | 5 | 출구 | 1번 출구 |
| 2 | asdf4221 | 1 | 3 | 엘리베이터 | 2번출구 쪽 엘리베이터 |
| 3 | yuioiu19y | 1 | 7 | 역 시설 | 수유실 |

프론트엔드에서 API를 통해 필요한 정보를 받아 사용자에게 음성으로 제공합니다.

### **애플리케이션 기능 (react-native)**

[react-native-beacons-manager 라이브러리](https://npm.io/package/@hkpuits/react-native-beacons-manager)를 활용하여 비콘과 휴대폰 간 통신을 진행합니다.

**현재 위치 서비스**

위치 추적 기능을 기반으로 API를 통해 가장 가까운 비콘의 place_name 값을 음성으로 안내합니다. 음성 다시 듣기 기능을 제공합니다.

**내선 조회 -Backend**

[서울교통공사 지하철역 주소 및 전화번호 정보 API](https://data.seoul.go.kr/dataList/OA-12035/A/1/datasetView.do)를 활용해 내선 번호 데이터베이스를 구축합니다.

DB에서 현재 역에 대한 정보를 가지고 와 현재 역에 해당하는 내선 전화를 우선으로 표시합니다.

- 검색 기능을 제공합니다.

내선 조회 데이터베이스 테이블

![Untitled](%E1%84%87%E1%85%A9%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3%E1%84%85%E1%85%A6%E1%84%8B%E1%85%B5%E1%86%AF0227%20tech-pioneers%20-%20%E1%84%87%E1%85%A2%E1%86%A8%E1%84%8B%E1%85%A5%E1%86%B8%206fd378cc174a40a0b38d2aa7f04a6022/Untitled%205.png)

**내선 조회 - Frontend**

API를 이용해 내선 정보를 받아 화면에 띄웁니다.

역 정보를 통해 자동으로 현재 역의 내선 번호를 받아와 가장 상단에 보여줍니다. (UI/UX 내선 정보 조회 참고)

**지하철 주요 시설 길 찾기 서비스**

지하철 출구, 승강장 위치 등 원하는 시설을 선택할 경우 해당 위치까지 음성으로 길 안내를 해줍니다.

## **하드웨어 적합성 평가**

### 안내방송 음량 가변 조절 장치

 지하철 내 소음 레벨은 대략 80dB정도 입니다. 따라서 스피커의 음량은 이보다 높은 수준이어야 탑승객이 수월하게 음성 안내를 들을 수 있습니다.

 비슷하게 음량이 중요한 설비로는 화재 경보 설비가 있습니다. 화재 경보 설비의 경우 그 어느 순간에도 사용자가 소리를 들을 수 있어야 합니다. 따라서 해당 규정을 만족한다면 충분한 음량을 출력한다고 할 수 있습니다. 

 화재 경보 설비의 음량은 미국 NFPA72에 규정되어 있습니다. 이는 국내 기준에도 동일하게 적용되고 있는 기준입니다. 이는 주위 소음레벨보다 안내 방송이 10㏈ ~ 15㏈ 높을 것을 권장하고 있습니다.

 따라서 안내방송 음량 가변 조절 장치의 경우 출력하는 음성의 음량이 95㏈이상을 만족하여야 합니다. 그러므로 안내방송 음량 가변 조절 장치는 여유를 고려하여 100㏈이상을 목표로 하였습니다. 하드웨어 선정의 근거는 다음과 같습니다. 

안내방송을 송출할 스피커는 Peerless by Tymphany社의 TC10FG00-04제품으로 선정하였습니다. 이 제품의 sensitivity 89.5㏈/W/m이고, Input power은 RMS 30Watt입니다. 

이때 스피커의 SPL을 구하는 공식은

$$
SPL=efficiency + 10*log(power) - 20*log(distance)
$$

이므로 SPL은 104.1㏈가 되게 됩니다.

 스피커를 구동하기 위한 AMP는 NXP社의 TDA8932 Class-D chipset이 사용된 break out board을 선정하였습니다.

TDA8932은 15 W stereo AMP이나 BTL mode로 작동할 수 있습니다. 이를 이용하면 각 channel의 AMP를 합쳐 output을 더 크게 할 수 있다. 따라서 mono 30Watt amp로 작동할 수 있는 것입니다.

하지만 AMP의 출력은 load의 impedance와 AMP의 Input voltage에 따라 달라질 수 있음에 유의해야 합니다. 따라서 이를 검증하고자 합니다.

datasheet에 따르면 BTL mode에서 THD+N = 0.5% 일때의 output power공식은 다음과 같습니다.

$$
P_{o(0.5\%)}=\frac{[(\frac{R_{L}}{R_{L}+2*(R_{DSon}+R_{S})})*(1-t_{w(min)}*f_{osc})*V_{P}]^{2}}{2*R_{L}}
$$

이때, Vp는 supply voltage, RL은 load impedance이고 Rdson = 0.15, Rs = 0.05, Resr = 0.05, Io = 4이고, tw(min) = 80n, fosc = 320k, Rosc = 39k로 정해져 있습니다.

그리고 RL = 4, Vp = 24 이므로,

이를 따라 계산하면, 59.1334W로 계산되지만, Output current limiting에 의해 30W의 출력을 가지게 됩니다. 이는 continious output으로 이는 충분히 증폭기가 스피커를 구동할 수 있음을 증명합니다.

## UI/UX

> **시각장애인이 휴대폰 애플리케이션을 이용하는 방식**
> 
> 
> 스마트폰에서 시각장애인을 위한 스크린리더 기능을 제공하며 시각장애인은 스크린리더 기능을 통해 UI를 사용할 수 있습니다.
> 모바일 스크린리더는 UI의 컴포넌트들을 순서대로 읽어주며 이 기능을 통해서 시각장애인들이 휴대폰 조작이 가능합니다.
> ex) 화면을 스크롤하다가 사용자 손가락이 “제물포역 전화걸기 버튼”에 위치할 경우 스크린리더는 “제물포역 전화걸기”라고 음성으로 안내를 해줍니다. 그리고 사용자가 더블클릭 시 해당 버튼이 active됩니다.
> 이는 스마트폰 자체에서 제공하는 기능으로 보이스레일 UI는 이러한 스크린리더에 모든 컴포넌트가 읽힐 수 있도록 구성되어있습니다.
> 

모든 기능에 음성 검색 기능, 자판 검색 기능을 제공하여 사용자의 편의성을 높입니다.

**1차 UI**

![Untitled](%E1%84%87%E1%85%A9%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3%E1%84%85%E1%85%A6%E1%84%8B%E1%85%B5%E1%86%AF0227%20tech-pioneers%20-%20%E1%84%87%E1%85%A2%E1%86%A8%E1%84%8B%E1%85%A5%E1%86%B8%206fd378cc174a40a0b38d2aa7f04a6022/Untitled%206.png)

![메인 화면](%E1%84%87%E1%85%A9%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3%E1%84%85%E1%85%A6%E1%84%8B%E1%85%B5%E1%86%AF0227%20tech-pioneers%20-%20%E1%84%87%E1%85%A2%E1%86%A8%E1%84%8B%E1%85%A5%E1%86%B8%206fd378cc174a40a0b38d2aa7f04a6022/Untitled%207.png)

메인 화면

image 사용 시 alt 속성을 명시하여 이미지를 설명해줍니다.

![내선 번호 조회](%E1%84%87%E1%85%A9%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3%E1%84%85%E1%85%A6%E1%84%8B%E1%85%B5%E1%86%AF0227%20tech-pioneers%20-%20%E1%84%87%E1%85%A2%E1%86%A8%E1%84%8B%E1%85%A5%E1%86%B8%206fd378cc174a40a0b38d2aa7f04a6022/Untitled%208.png)

내선 번호 조회

**위치 기반 자동화 필터** 
비콘을 이용한 위치 정보 기반으로 현재 역의 내선 번호를 가장 상단에 띄웁니다.

**즐겨찾기한 호선을 상단에 띄웁니다.**
자주 이용하는 호선의 번호를 조회하기 편리합니다.

**호선을 선택 후 포함된 역의 내선 번호를 조회합니다.** 
이는 역사 정보가 모두 읽히는 현상을 방지합니다.

![내선 번호 조회 > 1호선](%E1%84%87%E1%85%A9%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3%E1%84%85%E1%85%A6%E1%84%8B%E1%85%B5%E1%86%AF0227%20tech-pioneers%20-%20%E1%84%87%E1%85%A2%E1%86%A8%E1%84%8B%E1%85%A5%E1%86%B8%206fd378cc174a40a0b38d2aa7f04a6022/Untitled%209.png)

내선 번호 조회 > 1호선

**자주 이용하는 호선 즐겨찾기 기능을 제공합니다.**

**컴포넌트 기능과 View 통일**
스크린리더로 읽히는 곳과 탭하는 부분을 통일시켜 사용자의 혼란을 막습니다.

![주요시설 길찾기](%E1%84%87%E1%85%A9%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3%E1%84%85%E1%85%A6%E1%84%8B%E1%85%B5%E1%86%AF0227%20tech-pioneers%20-%20%E1%84%87%E1%85%A2%E1%86%A8%E1%84%8B%E1%85%A5%E1%86%B8%206fd378cc174a40a0b38d2aa7f04a6022/Untitled%2010.png)

주요시설 길찾기

**주요 시설 카테고리화**
모든 주요 시설 정보가 읽히는 현상을 방지합니다.

![주요시설 길찾기 > 출구](%E1%84%87%E1%85%A9%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3%E1%84%85%E1%85%A6%E1%84%8B%E1%85%B5%E1%86%AF0227%20tech-pioneers%20-%20%E1%84%87%E1%85%A2%E1%86%A8%E1%84%8B%E1%85%A5%E1%86%B8%206fd378cc174a40a0b38d2aa7f04a6022/Untitled%2011.png)

주요시설 길찾기 > 출구

주요 시설 선택 시 비콘 위치 추적 기반 음성 길 안내를 시작합니다.

**웹 접근성 지침**

[한국형 웹 콘텐츠 접근성 지침 2.2(Korean Web Content accessibility guidelines 2.2)](https://www.rra.go.kr/ko/reference/kcsList_view.do?nb_seq=5247&nb_type=6)는 방송통신표준심의회 심의를 거쳐 제작/배포된 문서이고, 비교적 최근에 지침이 개정되었습니다.(2022.12.28 개정)

장애인 관련된 대표적인 애플리케이션 가이드라인은 웹 접근성 지침이라고 할 수 있습니다.

어플리케이션의 주 사용자가 장애인이라는 점, 비장애인뿐만 아니라 모든 사람이 평등하고 손쉽게 앱을 사용할 수 있어야 한다는 점을 고려해 웹 접근성 지침에 기반해 앱을 개발하고자 합니다. 

다음은 한국형 웹 콘텐츠 접근성 지침 2.2의 머리말 내용입니다.

> 이 표준에서는 웹 접근성의 준수 여부를 평가할 수 있는 요구 조건과 지침들을 준수하면 얻을 수 있는 기대 효과를 소개하고 있다. 그러나 지침들을 가능한 한 준수하기 위해서 특정한 기술이 사용되어야 함을 전제하지 않았다. 그 이유는 본 표준에 포함된 지침들을 제정하는 시점에서 사용되는 기술만으로 한계를 정하기보다는 앞으로 개발될 기술을 최대한 수용할 수 있도록 하였기 때문이다. 이로 인하여 향후 개발될 여러 가지 기술을 적용하기 위해 본 표준이 전면적으로 수정되어야 하는 일을 피할 수 있다.
> 

이처럼 기술적인 부분에 대한 규정이 존재하지 않습니다. 저희는 시각장애인 베타 테스터에게 실제로 저희 애플리케이션을 사용하면서 부족한 점, 보완할 점을 피드백 받아 개선해나갈 예정입니다.

## **핵심 팀 구성원 소개 및 업무 내용**

박주미

팀장

- 모바일 웹 디자인
- DB ERD 설계
- 역 정보 테이블 구축
- API Docs 작성
- API 개발

---

구민성

팀원

- 모바일 웹 디자인
- 라즈베리파이 세팅
- ESP32 비콘 펌웨어
- 하드웨어 패키징
- 안내방송 음량 자동조절장치 개발

---

류지수

팀원

- 모바일 웹 디자인
- 모바일 웹 UI 제작
- 비콘 통신
- API 연결
- 프론트엔드 배포

---

한예지

팀원

- 모바일 웹 디자인
- 내선 조회 기능 - Backend
- API Docs 작성
- 백앤드 배포

## 일정표

![제목 없음.jpg](%E1%84%87%E1%85%A9%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3%E1%84%85%E1%85%A6%E1%84%8B%E1%85%B5%E1%86%AF0227%20tech-pioneers%20-%20%E1%84%87%E1%85%A2%E1%86%A8%E1%84%8B%E1%85%A5%E1%86%B8%206fd378cc174a40a0b38d2aa7f04a6022/%25EC%25A0%259C%25EB%25AA%25A9_%25EC%2597%2586%25EC%259D%258C.jpg)

## **테스트 환경**

2024년 02월 26일 3시에 제물포역 김익노 역장님과 미팅을 통해 제물포역을 보이스레일 비콘 테스트 환경으로 사용해도 좋다는 의사를 얻었습니다.

지하철에 적용하기 위한 절차에 대해 질의한 결과 지하철에 부착되는 모든 것들은 교통공사의 승인을 획득하면 비용을 지불하여 적용할 수 있다고 하셨습니다. 
다만 보이스레일의 경우 제물포역 측에서 윗선에 문의한 결과, 일시적으로 부착하는 것이고 좋은 취지에서 진행하는 것이기 때문에 역장님 선에서 해결해도 된다고 추가적인 비용없이 적용할 수 있게 되었습니다.

## 시연 계획

**지하철 소음 환경 구현 (안내방송 음량 자동조절장치)**

![소음의 영향, 환경부, 환경통계포털(보이지 않는 불청객, 환경소음이야기)](%E1%84%87%E1%85%A9%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3%E1%84%85%E1%85%A6%E1%84%8B%E1%85%B5%E1%86%AF%20tech-pioneers%200214b033715d4958b7b17b0b3d2505a6/Untitled%2010.png)

소음의 영향, 환경부, 환경통계포털(보이지 않는 불청객, 환경소음이야기)

- 다양한 데시벨의 사운드소스를 준비하여 소음 환경 구현
    - 50 ~ 90 (dB), 총 5가지의 소스 파일을 준비합니다.
        - 참고: 소음의 영향 이미지
    - 소음측정기(Sound Meter) 어플을 사용하여 소음에 따라 스피커의 음향이 자동으로 변하는지 확인합니다.
    - [열차 내 자동안내방송](http://www.seoulmetro.co.kr/kr/board.do?menuIdx=548&bbsIdx=2206868) 음원을 활용해 소음이 높을 때에도 안내방송이 들리는지 측정합니다.

**비콘 + 길찾기 기능 시연**

1. 지하철 역과 유사한 환경 구현
    
    실제 제물포 역의 일부 주요 시설들의 위치를 토대로 테이프로 영역을 구분합니다. 
    가능하면 실제 스케일로 영역을 구분하되 불가피한 경우 영역의 스케일을 0.5배로 줄입니다.
    영역마다 비콘을 설치한 후 길찾기 기능과 현재 위치 서비스를 확인합니다.
    
    ![Untitled](%E1%84%87%E1%85%A9%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B3%E1%84%85%E1%85%A6%E1%84%8B%E1%85%B5%E1%86%AF%20tech-pioneers%200214b033715d4958b7b17b0b3d2505a6/Untitled%2011.png)
    
2. 인천대학교 주요 시설에 비콘을 설치하여 인천대학교 정보기술대학 주요 시설에 대한 길 찾기 기능이 동작하는 지 확인합니다.
    - 비콘 UUID에 대한 정보를 DB에서 변경할 수 있기 때문에 역 시설 프로퍼티 관련 값을 인천대학교 정보기술대학교 주요 시설로 변경하여 시연할 수 있습니다.
    이는 실제 지하철 크기와 비슷하거나 더 크기가 큰 환경입니다.

환경 구현 후 팀원의 눈을 가리고 길찾기 기능을 시연합니다.

**애플리케이션 기능 시연**

- Talkback 기능을 활성화한 후 애플리케이션을 이용합니다.
    
    스크린리더가 UI 컴포넌트를 제대로 인식하는 지 확인합니다.
    

## 지원 경비 사용 계획서

### 하드웨어 구성요소

| 모델명 | 단가 | 수량 | 용도 | 링크 |
| --- | --- | --- | --- | --- |
| [Raspberry
  Pi] 라즈베리파이4 (Raspberry Pi 4 Model B) 4GB + 가이드북 + 방열판 | 73,000 | 1 | 음량
  자동 조절장치 겸 iBeacon제어용 | https://www.devicemart.co.kr/goods/view?no=12234534 |
| [NEXI]
  [사운드모듈/Virtual 5.1 채널/USB 2.0] NX-USOUND2 [NX394] | 2,200 | 1 | 음량
  자동 조절장치를 위한 소음 측정용 | https://www.devicemart.co.kr/goods/view?no=1333444 |
| [Coms]
  단상용/클립형 노래방 마이크 (AUX 3.5 Plug)[BT045] | 12,100 | 1 | 음량
  자동 조절장치를 위한 소음 측정용 마이크 | https://www.devicemart.co.kr/goods/view?no=10888028 |
| TDA8932
  35W 모노 디지털 앰프 모듈 [SZH-AMBO-016] | 2800 | 1 | 안내방송
  음량 가변 조절장치용 증폭기 | https://www.devicemart.co.kr/goods/view?no=1326900 |
| [Peerless by Tymphany] TC10FG00-04 | 24,580 | 1 | 안내방송
  음량 가변 조절장치용 스피커 | https://www.devicemart.co.kr/goods/view?no=8810348 |
| LM75-10D0524-20
  AC-DC 파워서플라이 (73W, 2채널) | 23,000 | 1 | 안내방송
  음량 가변 조절장치용 전원부 | https://www.devicemart.co.kr/goods/view?no=12709746 |
| [Happy
  House] ESP32 DevKitC WROOM-32D V4 CH9102X 개발보드 [CMC] | 7,000 | 22 | 실내
  위치 측위 및 전동차 내 사용자 스마트폰 데이터 전송을 위한 비콘 | https://www.devicemart.co.kr/goods/view?no=15314103 |
| [SMG-A]
  9V건전지 배터리홀더 전선형[1개입] | 500 | 22 | BLE 비콘
  전원용 | https://www.devicemart.co.kr/goods/view?no=3116 |
| [벡셀]
  6F22(9V,FC-1)Be | 1,700 | 22 | BLE 비콘
  전원용 | https://www.devicemart.co.kr/goods/view?no=2832 |
| [SAMGU]
  5V 고정 출력 강하형 DC-DC 컨버터 AMS1117 [SZH-LOD006] | 990 | 22 | BLE 비콘
  전원용 | https://www.devicemart.co.kr/goods/view?no=14452722 |
| 총합 | 361,860원 | VAT포함 | 398,046원 |  |